<h1>Evaluating rents</h1>

<%= form_tag("/rents_eval", :method => "get") do %>
  <%= date_select :eval, :date %> 
  <%= submit_tag "ok" %>
<% end %>

<table>
  <thead>
    <tr>
      <th>Start</th>
      <th>Basic rent</th>
      <th>Room</th>
      <th>Tenant</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @rents.each do |rent| %>
      <tr>
        <td><%= rent.start %></td>
        <td><%= rent.basic_rent %></td>
        <td><%= RoomsHelper::label(rent.room) %></td>
        <td><%= TenantsHelper::label(rent.tenant) %></td>
        <td><%= link_to 'Show Details/Contract', rent %></td>
        <td><%= link_to 'Edit', edit_rent_path(rent) %></td>
        <td><%= link_to 'Destroy', rent, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<b>Summe: Nettokalt vermietet: <%= @rents.collect { |r| r.basic_rent }.inject { |a,b| a+b } %> </b>
<b>Summe: mÂ² vermietet: <%= @rents.collect { |r| r.room.square_meter}.inject { |a,b| a+b } %> </b>

    @total_square = TotalSquareMeter.current_at(date)
    @needed_basic = NeededBasicRent.current_at(date)
    @needed_heating = NeededHeatingCharge.current_at(date)
    @needed_assessory = NeededAssessoryCharge.current_at(date)

<br>

<%= link_to 'New Rent', new_rent_path %>
